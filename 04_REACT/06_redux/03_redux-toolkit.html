<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://unpkg.com/redux@4.2.0/dist/redux.js"></script>
    <script
      src="https://unpkg.com/react@18/umd/react.development.js"
      crossorigin
    ></script>
    <script
      src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
      crossorigin
    ></script>
    <script src="https://unpkg.com/react-redux@8.1.1/dist/react-redux.js"></script>
    <script src="https://unpkg.com/@reduxjs/toolkit@1.9.5/dist/redux-toolkit.umd.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body>
    <div id="root"></div>

    <script type="text/babel">
      const { Provider, useSelector, useDispatch } = ReactRedux;
      const { createSlice, configureStore } = RTK;

      // 1. createSlice
      const counterSlice = createSlice({
        name: 'counter',
        initialState: { value: 0 },
        reducers: {
          increment: (state, action) => {
            state.value += action.payload;
          },
          decrement: (state, action) => {
            state.value -= action.payload;
          },
        },
      });

      // 2. actions (복수형!)
      const { increment, decrement } = counterSlice.actions;
      const counterReducer = counterSlice.reducer;

      // 3. configureStore
      const store = configureStore({
        reducer: {
          counter: counterReducer,
        },
      });

      // 4. React Component
      function App() {
        const count = useSelector((state) => state.counter.value);
        const dispatch = useDispatch();

        return (
          <>
            <h1>count: {count}</h1>
            <button onClick={() => dispatch(increment(1))}>+1</button>
            <button onClick={() => dispatch(decrement(1))}>-1</button>
          </>
        );
      }

      ReactDOM.createRoot(document.getElementById('root')).render(
        <Provider store={store}>
          <App />
        </Provider>
      );
    </script>
  </body>
</html>
